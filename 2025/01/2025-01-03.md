# Effective Java

# Item 75. 예외의 상세 메시지에 실패 관련 정보를 담으라

- 발생한 예외에 관여된 모든 매개 변수와 필드의 값을 실패 메시지에 담겨 있어야 실패 원인을 디버깅할 때 용이하다.
- 이 때 예외의 상세 메시지와 최종 사용자에게 보여줄 오류 메시지를 별개로 작성해야 한다.
    - 사용자에게는 실패 사유에 대한 간략한 내용만 보여주고, 실제 예외의 상세 메세지는 별도의 로그로 남긴다.

## 예외 메시지

- 프로세스가 예외로 인해 실패하는 경우 예외의 스택 추적(Stack trace)이 문제 분석의 핵심 단서가 된다.
    - 그렇기 때문에 예외 메시지에는 실패 원인과 연관된 최대한 많은 정보를 담아야 한다.
- 예외의 메세지에는 발생한 예외에 관여된 모든 매개변수와 필드의 값을 메시지에 담아야 한다.

    ```java
    /**
    * IndexOutOfBoundsException을 생성한다. *
    * @param lowerBound 인덱스의 최솟값
    * @param upperBound 인덱스의 최댓값 + 1 * @param index 인덱스의 실젯값
    */
    public IndexOutOfBoundsException(int lowerBound, int upperBound, int index) {
        // 예외 발생 시 최소 값, 최댓 값, 인덱스 정보를 메시지에 포함하여 후에 예외 추적을 용이하게 했다.
        super(String.format("최소값: %d, 최댓값: %d, 인덱스: %d", lowerBound, upperBound, index))
        
        this.lowerBound = lowerBound;
        this.uppperBound = upperBound;
        this.index = index;
    }
    ```


### 예외 메세지 작성 시 고려 사항

- 불필요한 정보는 굳이 작성할 필요가 없다
    - 예외 메시지는 관련 문서, 소스 코드와 함께 분석하기 때문에 핵심 정보만 요약하면 된다.
    - 즉, 예외 메시지는 문제가 발생한 상황을 설명하고 필요한 정보만 작성한다
- 예외 메시지와 최종적으로 사용자에게 전달하는 메시지를 다르게 작성해야 한다.
    - 예외 메시지는 개발자가 문제를 분석하기 위해 작성한 것이기 때문에 최종 사용자에게는 요약 메시지를 작성하고 실제 예외 메시지는 내용 중심으로 분석에 필요한 정보를 작성해야 한다

### 접근자 메서드

- 예외와는 별도로 접근자 메서드를 제공하는 것을 권장한다.
    - 위의 범위 정보의 경우로 보면 아래의 메서드를 제공함으로써 실패 정보 분석을 용이하게 할 수 있다.
        - `lowerBound()`
        - `upperBound()`
        - `index()`